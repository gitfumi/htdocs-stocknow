!function(e){e(function(){var a=e("form"),t=e(".js-formItem"),r=e(".js-formItemBody"),i=e(".js-formItemLabel"),n=e(".js-submit"),s=e(".js-validate"),c=e(".js-required"),l=e(".js-checkRequired"),o=e(".js-validateTextGroup"),h=e(".js-symbol"),f=e(".js-katakana"),u=e(".js-alphabet"),d=e(".js-number"),m=e(".js-zip"),p=e(".js-tel"),v=e(".js-url"),b=e(".js-email"),k=e(".js-emailCheck"),g=e(".js-password"),j=e(".js-passwordCheck"),C={error:"is-error",errorItem:"formItemError"},A={required:"必須項目です。",symbol:"記号が含まれています。",katakana:"カタカナのみ入力可能です。",alphabet:"半角英語のみ入力可能です。",number:"数値のみ入力可能です。",zip:"郵便番号の形式が異なります。",tel:"電話番号の形式が異なります。",url:"URLの形式が異なります。",email:"メールアドレスの形式が異なります。",emailCheck:"入力したメールアドレスと内容が異なります。",password:"6文字以上「半角の英字と数字」を組み合わせてください。",passwordCheck:"入力したパスワードと内容が異なります。"};({init:function(){var a=this;e(function(){a.blur(),a.change(),a.submit()})},blur:function(){var a=this;s.on("blur",function(){a.validateText(e(this))})},change:function(){var a=this;l.each(function(){var t=e(this);t.find(e(":radio, :checkbox")).on("change",function(){a.validateChecked(t)})})},submit:function(){var r=this;a.each(function(){var i=e(this);i.find(n).on("click",function(){e(this).closest(a).submit()}),i.on("submit",function(){if(i.find(s).each(function(){r.validateText(e(this))}),i.find(l).each(function(){r.validateChecked(e(this))}),i.find(e("."+C.errorItem)).length){var a=i.find(e("."+C.errorItem)[0]).closest(t).offset().top;return e("html,body").animate({scrollTop:a},"slow"),!1}})})},insertLabel:function(e){return e.closest(t).find(i).length?e.closest(t).find(i).text()+"は":""},validateChecked:function(a){var i=this,n=a.closest(t).find("."+C.errorItem),s=i.insertLabel(a);0===a.find(e(":radio:checked, :checkbox:checked")).length&&a.closest(r).append('<p class="'+C.errorItem+'">'+s+A.required+"</p>"),n.length&&n.remove()},validateText:function(a){var i=this,n=a.val(),s=a.closest(t).find("."+C.errorItem),l=i.insertLabel(a),H=function(e,t){s.length&&s.remove(),t?a.addClass(C.error).closest(r).append('<p class="'+C.errorItem+'">'+t+e+"</p>"):a.addClass(C.error).closest(r).append('<p class="'+C.errorItem+'">'+e+"</p>")},w=function(){s.length&&a.removeClass(C.error),a.closest(o).length?0===a.closest(o).find("."+C.error).length&&s.remove():s.remove()},I=function(e,a){var t;switch(a){case"isKanji":t=/(?:[々〇〻\u3400-\u9FFF\uF900-\uFAFF]|[\uD840-\uD87F][\uDC00-\uDFFF])/;break;case"isHiragana":t=/[ぁ-ん]/;break;case"isKatakana":t=/[ァ-ン]/;break;case"isHalfKatakana":t=/[ｧ-ﾝﾞﾟ]/;break;case"isAlphabet":t=/[ａ-ｚＡ-Ｚ]/;break;case"isHalfAlphabet":t=/[a-zA-Z]/;break;case"isNumber":t=/[０-９]/;break;case"isHalfNumber":t=/[0-9]/}return!!e.match(t)},F=function(e){return I(e,"isAlphabet")&&(e=e.replace(/[ａ-ｚＡ-Ｚ]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)})),e.match(/[０-９]/)&&(e=e.replace(/[０-９]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)})),e};a.is(":visible")||w(),a.filter(c).each(function(){""===n?H(A.required,l):w()}),a.filter(h).each(function(){if(""!=n){for(var e=n.split(""),a=!1,t=0;t<e.length;t++){var r=e[t];if(!(I(r,"isKanji")||I(r,"isHiragana")||I(r,"isKatakana")||I(r,"isHalfKatakana")||I(r,"isAlphabet")||I(r,"isHalfAlphabet"))){H(A.symbol),a=!0;break}}a||w()}}),a.filter(d).each(function(){""!=n&&(n=F(n),a.val(n),I(n,"isHalfNumber")?w():H(A.number,l))}),a.filter(u).each(function(){""!=n&&(n=F(n),a.val(n),I(n,"isHalfAlphabet")?w():H(A.alphabet,l))}),a.filter(m).each(function(){""!=n&&(n=F(n),a.val(n),n.match(/[-－ー]/)&&(n=n.replace(/[-－ー]/g,""),a.val(n)),n.match(/^[0-9]{7}$/)?(w(),AjaxZip3.zip2addr(this,"","address","address"),AjaxZip3.zip2addr("postal-code","","address-level1","address-level2")):H(A.zip))}),a.filter(p).each(function(){""!=n&&(n=F(n),a.val(n),n.match(/[-－ー]/)&&(n=n.replace(/[-－ー]/g,""),a.val(n)),n.match(/^[0-9]{9,12}$/)?w():H(A.tel))}),a.filter(f).each(function(){if(""!=n){var e={"ｶﾞ":"ガ","ｷﾞ":"ギ","ｸﾞ":"グ","ｹﾞ":"ゲ","ｺﾞ":"ゴ","ｻﾞ":"ザ","ｼﾞ":"ジ","ｽﾞ":"ズ","ｾﾞ":"ゼ","ｿﾞ":"ゾ","ﾀﾞ":"ダ","ﾁﾞ":"ヂ","ﾂﾞ":"ヅ","ﾃﾞ":"デ","ﾄﾞ":"ド","ﾊﾞ":"バ","ﾋﾞ":"ビ","ﾌﾞ":"ブ","ﾍﾞ":"ベ","ﾎﾞ":"ボ","ﾊﾟ":"パ","ﾋﾟ":"ピ","ﾌﾟ":"プ","ﾍﾟ":"ペ","ﾎﾟ":"ポ","ｳﾞ":"ヴ","ﾜﾞ":"ヷ","ｦﾞ":"ヺ","ｱ":"ア","ｲ":"イ","ｳ":"ウ","ｴ":"エ","ｵ":"オ","ｶ":"カ","ｷ":"キ","ｸ":"ク","ｹ":"ケ","ｺ":"コ","ｻ":"サ","ｼ":"シ","ｽ":"ス","ｾ":"セ","ｿ":"ソ","ﾀ":"タ","ﾁ":"チ","ﾂ":"ツ","ﾃ":"テ","ﾄ":"ト","ﾅ":"ナ","ﾆ":"ニ","ﾇ":"ヌ","ﾈ":"ネ","ﾉ":"ノ","ﾊ":"ハ","ﾋ":"ヒ","ﾌ":"フ","ﾍ":"ヘ","ﾎ":"ホ","ﾏ":"マ","ﾐ":"ミ","ﾑ":"ム","ﾒ":"メ","ﾓ":"モ","ﾔ":"ヤ","ﾕ":"ユ","ﾖ":"ヨ","ﾗ":"ラ","ﾘ":"リ","ﾙ":"ル","ﾚ":"レ","ﾛ":"ロ","ﾜ":"ワ","ｦ":"ヲ","ﾝ":"ン","ｧ":"ァ","ｨ":"ィ","ｩ":"ゥ","ｪ":"ェ","ｫ":"ォ","ｯ":"ッ","ｬ":"ャ","ｭ":"ュ","ｮ":"ョ","｡":"。","､":"、","ｰ":"ー","｢":"「","｣":"」","･":"・"};if(I(n,"isHiragana")&&(n=n.replace(/[ぁ-ん]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+96)}),a.val(n)),I(n,"isHalfKatakana")){var t=new RegExp("("+Object.keys(e).join("|")+")","g");n=n.replace(t,function(a){return e[a]}).replace(/ﾞ/g,"゛").replace(/ﾟ/g,"゜"),a.val(n)}n&&!n.match(/^[ァ-ロワヲンー　\s]*$/)?H(A.katakana,l):w()}}),a.filter(v).each(function(){""!=n&&(n.match(/^http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w-.\/?%&=]*)?/)?w():H(A.url))}),a.filter(b).each(function(){""!=n&&(n&&!n.match(/.+@.+\..+/g)?H(A.email):w())}),a.filter(k).each(function(){""!=n&&(e(this).val()&&e(this).val()!=e("input[name="+e(this).attr("name").replace(/^(.+)-check$/,"$1")+"]").val()?H(A.emailCheck):w())}),a.filter(g).each(function(){if(""!=n){n=F(n);var e=String(n).length;a.val(n),I(n,"isHalfAlphabet")&&I(n,"isHalfNumber")&&e>=6?w():H(A.password,l)}}),a.filter(j).each(function(){""!=n&&(e(this).val()&&e(this).val()!=e("input[name="+e(this).attr("name").replace(/^(.+)-check$/,"$1")+"]").val()?H(A.passwordCheck):w())})}}).init()})}(jQuery);